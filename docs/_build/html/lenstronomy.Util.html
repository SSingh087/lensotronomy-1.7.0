
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>lenstronomy.Util package &#8212; lenstronomy 1.7.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="lenstronomy.Workflow package" href="lenstronomy.Workflow.html" />
    <link rel="prev" title="lenstronomy.SimulationAPI.ObservationConfig package" href="lenstronomy.SimulationAPI.ObservationConfig.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lenstronomy.Workflow.html" title="lenstronomy.Workflow package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="lenstronomy.SimulationAPI.ObservationConfig.html" title="lenstronomy.SimulationAPI.ObservationConfig package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">lenstronomy 1.7.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="lenstronomy.html" accesskey="U">lenstronomy package</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="lenstronomy-util-package">
<h1>lenstronomy.Util package<a class="headerlink" href="#lenstronomy-util-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-lenstronomy.Util.analysis_util">
<span id="lenstronomy-util-analysis-util-module"></span><h2>lenstronomy.Util.analysis_util module<a class="headerlink" href="#module-lenstronomy.Util.analysis_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.analysis_util.half_light_radius">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">half_light_radius</code><span class="sig-paren">(</span><em>lens_light</em>, <em>x_grid</em>, <em>y_grid</em>, <em>center_x=0</em>, <em>center_y=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#half_light_radius"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.half_light_radius" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lens_light</strong> – array of surface brightness</li>
<li><strong>x_grid</strong> – x-axis coordinates</li>
<li><strong>y_gird</strong> – y-axis coordinates</li>
<li><strong>center_x</strong> – center of light</li>
<li><strong>center_y</strong> – center of light</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.analysis_util.radial_profile">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">radial_profile</code><span class="sig-paren">(</span><em>light_grid</em>, <em>x_grid</em>, <em>y_grid</em>, <em>center_x=0</em>, <em>center_y=0</em>, <em>n=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#radial_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.radial_profile" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>light_grid</strong> – array of surface brightness</li>
<li><strong>x_grid</strong> – x-axis coordinates</li>
<li><strong>y_gird</strong> – y-axis coordinates</li>
<li><strong>center_x</strong> – center of light</li>
<li><strong>center_y</strong> – center of light</li>
<li><strong>n</strong> – number of discrete steps</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.analysis_util.azimuthalAverage">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">azimuthalAverage</code><span class="sig-paren">(</span><em>image</em>, <em>center=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#azimuthalAverage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.azimuthalAverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the azimuthally averaged radial profile.</p>
<p>image - The 2D image
center - The [x,y] pixel coordinates used as the center. The default is None, which then uses the center of the
image (including fractional pixels).
:return: I(r) (averaged), r of bin edges</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.analysis_util.moments">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">moments</code><span class="sig-paren">(</span><em>I_xy_input</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#moments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.moments" title="Permalink to this definition">¶</a></dt>
<dd><p>compute quadrupole moments from a light distribution</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>I_xy</strong> – light distribution</li>
<li><strong>x</strong> – x-coordinates of I_xy</li>
<li><strong>y</strong> – y-coordinates of I_xy</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Q_xx, Q_xy, Q_yy</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.analysis_util.ellipticities">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">ellipticities</code><span class="sig-paren">(</span><em>I_xy</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#ellipticities"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.ellipticities" title="Permalink to this definition">¶</a></dt>
<dd><p>compute ellipticities of a light distribution</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>I_xy</strong> – </li>
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.analysis_util.bic_model">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">bic_model</code><span class="sig-paren">(</span><em>logL</em>, <em>num_data</em>, <em>num_param</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#bic_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.bic_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Bayesian information criteria</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>logL</strong> – log likelihood value</li>
<li><strong>num_data</strong> – numbers of data</li>
<li><strong>num_param</strong> – numbers of model parameters</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">BIC value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.analysis_util.profile_center">
<code class="descclassname">lenstronomy.Util.analysis_util.</code><code class="descname">profile_center</code><span class="sig-paren">(</span><em>kwargs_list</em>, <em>center_x=None</em>, <em>center_y=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/analysis_util.html#profile_center"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.analysis_util.profile_center" title="Permalink to this definition">¶</a></dt>
<dd><p>utility routine that results in the centroid estimate for the profile estimates</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kwargs_list</strong> – light parameter keyword argument list (can be light or mass)</li>
<li><strong>center_x</strong> – None or center</li>
<li><strong>center_y</strong> – None or center</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">center_x, center_y</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.class_creator">
<span id="lenstronomy-util-class-creator-module"></span><h2>lenstronomy.Util.class_creator module<a class="headerlink" href="#module-lenstronomy.Util.class_creator" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.class_creator.create_class_instances">
<code class="descclassname">lenstronomy.Util.class_creator.</code><code class="descname">create_class_instances</code><span class="sig-paren">(</span><em>lens_model_list=[]</em>, <em>z_lens=None</em>, <em>z_source=None</em>, <em>lens_redshift_list=None</em>, <em>multi_plane=False</em>, <em>observed_convention_index=None</em>, <em>source_light_model_list=[]</em>, <em>lens_light_model_list=[]</em>, <em>point_source_model_list=[]</em>, <em>fixed_magnification_list=None</em>, <em>flux_from_point_source_list=None</em>, <em>additional_images_list=None</em>, <em>kwargs_lens_eqn_solver=None</em>, <em>source_deflection_scaling_list=None</em>, <em>source_redshift_list=None</em>, <em>cosmo=None</em>, <em>index_lens_model_list=None</em>, <em>index_source_light_model_list=None</em>, <em>index_lens_light_model_list=None</em>, <em>index_point_source_model_list=None</em>, <em>optical_depth_model_list=[]</em>, <em>index_optical_depth_model_list=None</em>, <em>band_index=0</em>, <em>tau0_index_list=None</em>, <em>all_models=False</em>, <em>point_source_magnification_limit=None</em>, <em>surface_brightness_smoothing=0.001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/class_creator.html#create_class_instances"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.class_creator.create_class_instances" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lens_model_list</strong> – list of strings indicating the type of lens models</li>
<li><strong>z_lens</strong> – redshift of the deflector (for single lens plane mode, but only relevant when computing physical quantities)</li>
<li><strong>z_source</strong> – redshift of source (for single source plane mode, or for multiple source planes the redshift of the point source). In regard to this redshift the reduced deflection angles are defined in the lens model.</li>
<li><strong>lens_redshift_list</strong> – </li>
<li><strong>multi_plane</strong> – </li>
<li><strong>observed_convention_index</strong> – </li>
<li><strong>source_light_model_list</strong> – </li>
<li><strong>lens_light_model_list</strong> – </li>
<li><strong>point_source_model_list</strong> – </li>
<li><strong>fixed_magnification_list</strong> – </li>
<li><strong>flux_from_point_source_list</strong> – list of bools (optional), if set, will only return image positions
(for imaging modeling) for the subset of the point source lists that =True. This option enables to model</li>
<li><strong>additional_images_list</strong> – </li>
<li><strong>kwargs_lens_eqn_solver</strong> – keyword arguments specifying the numerical settings for the lens equation solver
see LensEquationSolver() class for details</li>
<li><strong>source_deflection_scaling_list</strong> – </li>
<li><strong>source_redshift_list</strong> – </li>
<li><strong>cosmo</strong> – astropy.cosmology instance</li>
<li><strong>index_lens_model_list</strong> – </li>
<li><strong>index_source_light_model_list</strong> – </li>
<li><strong>index_lens_light_model_list</strong> – </li>
<li><strong>index_point_source_model_list</strong> – </li>
<li><strong>optical_depth_model_list</strong> – list of strings indicating the optical depth model to compute (differential) extinctions from the source</li>
<li><strong>index_optical_depth_model_list</strong> – </li>
<li><strong>band_index</strong> – int, index of band to consider. Has an effect if only partial models are considered for a specific band</li>
<li><strong>tau0_index_list</strong> – list of integers of the specific extinction scaling parameter tau0 for each band</li>
<li><strong>all_models</strong> – bool, if True, will make class instances of all models ignoring potential keywords that are excluding specific models as indicated.</li>
<li><strong>point_source_magnification_limit</strong> – float &gt;0 or None, if set and additional images are computed, then it will cut the point sources computed to the limiting (absolute) magnification</li>
<li><strong>surface_brightness_smoothing</strong> – float, smoothing scale of light profile (minimal distance to the center of a profile)
this can help to avoid inaccuracies in the very center of a cuspy light profile</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.class_creator.create_image_model">
<code class="descclassname">lenstronomy.Util.class_creator.</code><code class="descname">create_image_model</code><span class="sig-paren">(</span><em>kwargs_data</em>, <em>kwargs_psf</em>, <em>kwargs_numerics</em>, <em>kwargs_model</em>, <em>likelihood_mask=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/class_creator.html#create_image_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.class_creator.create_image_model" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kwargs_data</strong> – </li>
<li><strong>kwargs_psf</strong> – </li>
<li><strong>kwargs_model</strong> – </li>
<li><strong>kwargs_model_indexes</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.class_creator.create_im_sim">
<code class="descclassname">lenstronomy.Util.class_creator.</code><code class="descname">create_im_sim</code><span class="sig-paren">(</span><em>multi_band_list</em>, <em>multi_band_type</em>, <em>kwargs_model</em>, <em>bands_compute=None</em>, <em>likelihood_mask_list=None</em>, <em>band_index=0</em>, <em>kwargs_pixelbased=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/class_creator.html#create_im_sim"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.class_creator.create_im_sim" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>multi_band_type</strong> – string, option when having multiple imaging data sets modelled simultaneously. Options are:</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>‘multi-linear’: linear amplitudes are inferred on single data set</li>
<li>‘linear-joint’: linear amplitudes ae jointly inferred</li>
<li>‘single-band’: single band</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs_pixelbased</strong> – keyword arguments with various settings related to the pixel-based solver (see SLITronomy documentation)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">MultiBand class instance</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.constants">
<span id="lenstronomy-util-constants-module"></span><h2>lenstronomy.Util.constants module<a class="headerlink" href="#module-lenstronomy.Util.constants" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.constants.delay_arcsec2days">
<code class="descclassname">lenstronomy.Util.constants.</code><code class="descname">delay_arcsec2days</code><span class="sig-paren">(</span><em>delay_arcsec</em>, <em>D_dt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/constants.html#delay_arcsec2days"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.constants.delay_arcsec2days" title="Permalink to this definition">¶</a></dt>
<dd><p>given a delay in arcsec^2 and a Delay distance, the delay is computed in days</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>delay_arcsec</strong> – gravitational delay in units of arcsec^2 (e.g. Fermat potential)</li>
<li><strong>D_dt</strong> – Time delay distance (in units of Mpc)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">time-delay in units of days</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.correlation">
<span id="lenstronomy-util-correlation-module"></span><h2>lenstronomy.Util.correlation module<a class="headerlink" href="#module-lenstronomy.Util.correlation" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.correlation.correlation_2D">
<code class="descclassname">lenstronomy.Util.correlation.</code><code class="descname">correlation_2D</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/correlation.html#correlation_2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.correlation.correlation_2D" title="Permalink to this definition">¶</a></dt>
<dd><p>#TODO document normalization output in units</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> – 2d image</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">2d fourier transform</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.correlation.power_spectrum_2d">
<code class="descclassname">lenstronomy.Util.correlation.</code><code class="descname">power_spectrum_2d</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/correlation.html#power_spectrum_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.correlation.power_spectrum_2d" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> – 2d numpy array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">2d power spectrum in frequency units of the pixels</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.correlation.power_spectrum_1d">
<code class="descclassname">lenstronomy.Util.correlation.</code><code class="descname">power_spectrum_1d</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/correlation.html#power_spectrum_1d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.correlation.power_spectrum_1d" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> – 2d numpy array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">1d radially averaged power spectrum of image in frequency units of pixels</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.data_util">
<span id="lenstronomy-util-data-util-module"></span><h2>lenstronomy.Util.data_util module<a class="headerlink" href="#module-lenstronomy.Util.data_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.data_util.bkg_noise">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">bkg_noise</code><span class="sig-paren">(</span><em>readout_noise</em>, <em>exposure_time</em>, <em>sky_brightness</em>, <em>pixel_scale</em>, <em>num_exposures=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#bkg_noise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.bkg_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the expected Gaussian background noise of a pixel in units of counts/second</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>readout_noise</strong> – noise added per readout</li>
<li><strong>exposure_time</strong> – exposure time per exposure (in seconds)</li>
<li><strong>sky_brightness</strong> – counts per second per unit arcseconds square</li>
<li><strong>pixel_scale</strong> – size of pixel in units arcseonds</li>
<li><strong>num_exposures</strong> – number of exposures (with same exposure time) to be co-added</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">estimated Gaussian noise sqrt(variance)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.data_util.flux_noise">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">flux_noise</code><span class="sig-paren">(</span><em>cps_pixel</em>, <em>exposure_time</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#flux_noise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.flux_noise" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the variance of the shot noise Gaussian approximation of Poisson noise term</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cps_pixel</strong> – counts per second of the intensity per pixel unit</li>
<li><strong>exposure_time</strong> – total exposure time (in units seconds or equivalent unit as cps_pixel)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">sqrt(variance) of pixel value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.data_util.magnitude2cps">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">magnitude2cps</code><span class="sig-paren">(</span><em>magnitude</em>, <em>magnitude_zero_point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#magnitude2cps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.magnitude2cps" title="Permalink to this definition">¶</a></dt>
<dd><p>converts an apparent magnitude to counts per second</p>
<p>The zero point of an instrument, by definition, is the magnitude of an object that produces one count
(or data number, DN) per second. The magnitude of an arbitrary object producing DN counts in an observation of
length EXPTIME is therefore:
m = -2.5 x log10(DN / EXPTIME) + ZEROPOINT</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>magnitude</strong> – </li>
<li><strong>magnitude_zero_point</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">counts per second</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.data_util.cps2magnitude">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">cps2magnitude</code><span class="sig-paren">(</span><em>cps</em>, <em>magnitude_zero_point</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#cps2magnitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.cps2magnitude" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cps</strong> – float, count-per-second</li>
<li><strong>magnitude_zero_point</strong> – magnitude zero point</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">magnitude for given counts</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.data_util.absolute2apparent_magnitude">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">absolute2apparent_magnitude</code><span class="sig-paren">(</span><em>absolute_magnitude</em>, <em>d_parsec</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#absolute2apparent_magnitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.absolute2apparent_magnitude" title="Permalink to this definition">¶</a></dt>
<dd><p>converts absolute to apparent magnitudes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>absolute_magnitude</strong> – absolute magnitude of object</li>
<li><strong>d_parsec</strong> – distance to object in untis parsec</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">apparent magnitude</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.data_util.adu2electrons">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">adu2electrons</code><span class="sig-paren">(</span><em>adu</em>, <em>ccd_gain</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#adu2electrons"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.adu2electrons" title="Permalink to this definition">¶</a></dt>
<dd><p>converts analog-to-digital units into electron counts</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>adu</strong> – counts in analog-to-digital unit</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">counts in electrons</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.data_util.electrons2adu">
<code class="descclassname">lenstronomy.Util.data_util.</code><code class="descname">electrons2adu</code><span class="sig-paren">(</span><em>electrons</em>, <em>ccd_gain</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/data_util.html#electrons2adu"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.data_util.electrons2adu" title="Permalink to this definition">¶</a></dt>
<dd><p>converts electron counts into analog-to-digital unit</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>electrons</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">adu value corresponding to electron count</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.derivative_util">
<span id="lenstronomy-util-derivative-util-module"></span><h2>lenstronomy.Util.derivative_util module<a class="headerlink" href="#module-lenstronomy.Util.derivative_util" title="Permalink to this headline">¶</a></h2>
<p>routines to compute derivatives of spherical functions</p>
<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_r_dx">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_r_dx</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_r_dx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_r_dx" title="Permalink to this definition">¶</a></dt>
<dd><p>derivative of r with respect to x
:param x:
:param y:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_r_dy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_r_dy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_r_dy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_r_dy" title="Permalink to this definition">¶</a></dt>
<dd><p>differential dr/dy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_r_dxx">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_r_dxx</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_r_dxx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_r_dxx" title="Permalink to this definition">¶</a></dt>
<dd><p>second derivative dr/dxdx
:param x:
:param y:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_r_dyy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_r_dyy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_r_dyy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_r_dyy" title="Permalink to this definition">¶</a></dt>
<dd><p>second derivative dr/dxdx
:param x:
:param y:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_r_dxy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_r_dxy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_r_dxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_r_dxy" title="Permalink to this definition">¶</a></dt>
<dd><p>second derivative dr/dxdx
:param x:
:param y:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_phi_dx">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_phi_dx</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_phi_dx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_phi_dx" title="Permalink to this definition">¶</a></dt>
<dd><p>angular derivative in respect to x when phi = arctan2(y, x)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_phi_dy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_phi_dy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_phi_dy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_phi_dy" title="Permalink to this definition">¶</a></dt>
<dd><p>angular derivative in respect to y when phi = arctan2(y, x)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_phi_dxx">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_phi_dxx</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_phi_dxx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_phi_dxx" title="Permalink to this definition">¶</a></dt>
<dd><p>second derivative of the orientation angle</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_phi_dyy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_phi_dyy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_phi_dyy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_phi_dyy" title="Permalink to this definition">¶</a></dt>
<dd><p>second derivative of the orientation angle in dydy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_phi_dxy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_phi_dxy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_phi_dxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_phi_dxy" title="Permalink to this definition">¶</a></dt>
<dd><p>second derivative of the orientation angle in dxdy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_x_diffr_dx">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_x_diffr_dx</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_x_diffr_dx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_x_diffr_dx" title="Permalink to this definition">¶</a></dt>
<dd><p>derivative of d(x/r)/dx
equivalent to second order derivatives dr_dxx</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_y_diffr_dy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_y_diffr_dy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_y_diffr_dy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_y_diffr_dy" title="Permalink to this definition">¶</a></dt>
<dd><p>derivative of d(y/r)/dy
equivalent to second order derivatives dr_dyy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_y_diffr_dx">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_y_diffr_dx</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_y_diffr_dx"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_y_diffr_dx" title="Permalink to this definition">¶</a></dt>
<dd><p>derivative of d(y/r)/dx
equivalent to second order derivatives dr_dxy</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.derivative_util.d_x_diffr_dy">
<code class="descclassname">lenstronomy.Util.derivative_util.</code><code class="descname">d_x_diffr_dy</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/derivative_util.html#d_x_diffr_dy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.derivative_util.d_x_diffr_dy" title="Permalink to this definition">¶</a></dt>
<dd><p>derivative of d(x/r)/dy
equivalent to second order derivatives dr_dyx</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.image_util">
<span id="lenstronomy-util-image-util-module"></span><h2>lenstronomy.Util.image_util module<a class="headerlink" href="#module-lenstronomy.Util.image_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.image_util.add_layer2image">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">add_layer2image</code><span class="sig-paren">(</span><em>grid2d</em>, <em>x_pos</em>, <em>y_pos</em>, <em>kernel</em>, <em>order=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#add_layer2image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.add_layer2image" title="Permalink to this definition">¶</a></dt>
<dd><p>adds a kernel on the grid2d image at position x_pos, y_pos with an interpolated subgrid pixel shift of order=order
:param grid2d: 2d pixel grid (i.e. image)
:param x_pos: x-position center (pixel coordinate) of the layer to be added
:param y_pos: y-position center (pixel coordinate) of the layer to be added
:param kernel: the layer to be added to the image
:param order: interpolation order for sub-pixel shift of the kernel to be added
:return: image with added layer, cut to original size</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.add_layer2image_int">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">add_layer2image_int</code><span class="sig-paren">(</span><em>grid2d</em>, <em>x_pos</em>, <em>y_pos</em>, <em>kernel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#add_layer2image_int"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.add_layer2image_int" title="Permalink to this definition">¶</a></dt>
<dd><p>adds a kernel on the grid2d image at position x_pos, y_pos at integer positions of pixel
:param grid2d: 2d pixel grid (i.e. image)
:param x_pos: x-position center (pixel coordinate) of the layer to be added
:param y_pos: y-position center (pixel coordinate) of the layer to be added
:param kernel: the layer to be added to the image
:return: image with added layer</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.add_background">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">add_background</code><span class="sig-paren">(</span><em>image</em>, <em>sigma_bkd</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#add_background"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.add_background" title="Permalink to this definition">¶</a></dt>
<dd><p>adds background noise to image
:param image: pixel values of image
:param sigma_bkd: background noise (sigma)
:return: a realisation of Gaussian noise of the same size as image</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.add_poisson">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">add_poisson</code><span class="sig-paren">(</span><em>image</em>, <em>exp_time</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#add_poisson"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.add_poisson" title="Permalink to this definition">¶</a></dt>
<dd><p>adds a poison (or Gaussian) distributed noise with mean given by surface brightness
:param image: pixel values (photon counts per unit exposure time)
:param exp_time: exposure time
:return: Poisson noise realization of input image</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.rotateImage">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">rotateImage</code><span class="sig-paren">(</span><em>img</em>, <em>angle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#rotateImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.rotateImage" title="Permalink to this definition">¶</a></dt>
<dd><p>querries scipy.ndimage.rotate routine
:param img: image to be rotated
:param angle: angle to be rotated (radian)
:return: rotated image</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.re_size_array">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">re_size_array</code><span class="sig-paren">(</span><em>x_in</em>, <em>y_in</em>, <em>input_values</em>, <em>x_out</em>, <em>y_out</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#re_size_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.re_size_array" title="Permalink to this definition">¶</a></dt>
<dd><p>resizes 2d array (i.e. image) to new coordinates. So far only works with square output aligned with coordinate axis.
:param x_in:
:param y_in:
:param input_values:
:param x_out:
:param y_out:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.symmetry_average">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">symmetry_average</code><span class="sig-paren">(</span><em>image</em>, <em>symmetry</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#symmetry_average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.symmetry_average" title="Permalink to this definition">¶</a></dt>
<dd><p>symmetry averaged image
:param image:
:param symmetry:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.findOverlap">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">findOverlap</code><span class="sig-paren">(</span><em>x_mins</em>, <em>y_mins</em>, <em>min_distance</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#findOverlap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.findOverlap" title="Permalink to this definition">¶</a></dt>
<dd><p>finds overlapping solutions, deletes multiples and deletes non-solutions and if it is not a solution, deleted as well</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.coordInImage">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">coordInImage</code><span class="sig-paren">(</span><em>x_coord</em>, <em>y_coord</em>, <em>numPix</em>, <em>deltapix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#coordInImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.coordInImage" title="Permalink to this definition">¶</a></dt>
<dd><p>checks whether image positions are within the pixel image in units of arcsec
if not: remove it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>imcoord</strong> (<em>(</em><em>n</em><em>,</em><em>4</em><em>) </em><em>numpy array</em>) – image coordinate (in units of angels)  [[x,y,delta,magnification][…]]</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">image positions within the pixel image</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.re_size">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">re_size</code><span class="sig-paren">(</span><em>image</em>, <em>factor=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#re_size"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.re_size" title="Permalink to this definition">¶</a></dt>
<dd><p>re-sizes image with nx x ny to nx/factor x ny/factor
:param image: 2d image with shape (nx,ny)
:param factor: integer &gt;=1
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.rebin_image">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">rebin_image</code><span class="sig-paren">(</span><em>bin_size</em>, <em>image</em>, <em>wht_map</em>, <em>sigma_bkg</em>, <em>ra_coords</em>, <em>dec_coords</em>, <em>idex_mask</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#rebin_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.rebin_image" title="Permalink to this definition">¶</a></dt>
<dd><p>rebins pixels, updates cutout image, wht_map, sigma_bkg, coordinates, PSF
:param bin_size: number of pixels (per axis) to merge
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.rebin_coord_transform">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">rebin_coord_transform</code><span class="sig-paren">(</span><em>factor</em>, <em>x_at_radec_0</em>, <em>y_at_radec_0</em>, <em>Mpix2coord</em>, <em>Mcoord2pix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#rebin_coord_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.rebin_coord_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>adopt coordinate system and transformation between angular and pixel coordinates of a re-binned image
:param bin_size:
:param ra_0:
:param dec_0:
:param x_0:
:param y_0:
:param Matrix:
:param Matrix_inv:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.stack_images">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">stack_images</code><span class="sig-paren">(</span><em>image_list</em>, <em>wht_list</em>, <em>sigma_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#stack_images"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.stack_images" title="Permalink to this definition">¶</a></dt>
<dd><p>stacks images and saves new image as a fits file
:param image_name_list: list of image_names to be stacked
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.cut_edges">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">cut_edges</code><span class="sig-paren">(</span><em>image</em>, <em>numPix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#cut_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.cut_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>cuts out the edges of a 2d image and returns re-sized image to numPix
center is well defined for odd pixel sizes.
:param image: 2d numpy array
:param numPix: square size of cut out image
:return: cutout image with size numPix</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.radial_profile">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">radial_profile</code><span class="sig-paren">(</span><em>data, center=[0, 0]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#radial_profile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.radial_profile" title="Permalink to this definition">¶</a></dt>
<dd><p>computes radial profile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> – 2d numpy array</li>
<li><strong>center</strong> – center [x, y] from where to compute the radial profile</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">radial profile (in units pixel)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.image_util.gradient_map">
<code class="descclassname">lenstronomy.Util.image_util.</code><code class="descname">gradient_map</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/image_util.html#gradient_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.image_util.gradient_map" title="Permalink to this definition">¶</a></dt>
<dd><p>computes gradients of images with the sobel transform</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>image</strong> – 2d numpy array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">array of same size as input, with gradients between neighboring pixels</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.kernel_util">
<span id="lenstronomy-util-kernel-util-module"></span><h2>lenstronomy.Util.kernel_util module<a class="headerlink" href="#module-lenstronomy.Util.kernel_util" title="Permalink to this headline">¶</a></h2>
<p>routines that manipulate convolution kernels</p>
<dl class="function">
<dt id="lenstronomy.Util.kernel_util.de_shift_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">de_shift_kernel</code><span class="sig-paren">(</span><em>kernel</em>, <em>shift_x</em>, <em>shift_y</em>, <em>iterations=20</em>, <em>fractional_step_size=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#de_shift_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.de_shift_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>de-shifts a shifted kernel to the center of a pixel. This is performed iteratively.</p>
<dl class="docutils">
<dt>The input kernel is the solution of a linear interpolated shift of a sharper kernel centered in the middle of the</dt>
<dd>pixel. To find the de-shifted kernel, we perform an iterative correction of proposed de-shifted kernels and compare
its shifted version with the input kernel.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel</strong> – (shifted) kernel, e.g. a star in an image that is not centered in the pixel grid</li>
<li><strong>shift_x</strong> – x-offset relative to the center of the pixel (sub-pixel shift)</li>
<li><strong>shift_y</strong> – y-offset relative to the center of the pixel (sub-pixel shift)</li>
<li><strong>iterations</strong> – number of repeated iterations of shifting a new de-shifted kernel and apply corrections</li>
<li><strong>fractional_step_size</strong> – float (0, 1] correction factor relative to previous proposal (can be used for stability</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">de-shifted kernel such that the interpolated shift boy (shift_x, shift_y) results in the input kernel</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.center_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">center_kernel</code><span class="sig-paren">(</span><em>kernel</em>, <em>iterations=20</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#center_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.center_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>given a kernel that might not be perfectly centered, this routine computes its light weighted center and then
moves the center in an iterative process such that it is centered</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel</strong> – 2d array (odd numbers)</li>
<li><strong>iterations</strong> – int, number of iterations</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">centered kernel</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.kernel_norm">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">kernel_norm</code><span class="sig-paren">(</span><em>kernel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#kernel_norm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.kernel_norm" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kernel</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">normalisation of the psf kernel</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.subgrid_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">subgrid_kernel</code><span class="sig-paren">(</span><em>kernel</em>, <em>subgrid_res</em>, <em>odd=False</em>, <em>num_iter=100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#subgrid_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.subgrid_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>creates a higher resolution kernel with subgrid resolution as an interpolation of the original kernel in an
iterative approach</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel</strong> – initial kernel</li>
<li><strong>subgrid_res</strong> – subgrid resolution required</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">kernel with higher resolution (larger)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.averaging_even_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">averaging_even_kernel</code><span class="sig-paren">(</span><em>kernel_high_res</em>, <em>subgrid_res</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#averaging_even_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.averaging_even_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>makes a lower resolution kernel based on the kernel_high_res (odd numbers) and the subgrid_res (even number), both
meant to be centered.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel_high_res</strong> – high resolution kernel with even subsampling resolution, centered</li>
<li><strong>subgrid_res</strong> – subsampling resolution (even number)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">averaged undersampling kernel</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.kernel_pixelsize_change">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">kernel_pixelsize_change</code><span class="sig-paren">(</span><em>kernel</em>, <em>deltaPix_in</em>, <em>deltaPix_out</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#kernel_pixelsize_change"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.kernel_pixelsize_change" title="Permalink to this definition">¶</a></dt>
<dd><p>change the pixel size of a given kernel
:param kernel:
:param deltaPix_in:
:param deltaPix_out:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.cut_psf">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">cut_psf</code><span class="sig-paren">(</span><em>psf_data</em>, <em>psf_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#cut_psf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.cut_psf" title="Permalink to this definition">¶</a></dt>
<dd><p>cut the psf properly
:param psf_data: image of PSF
:param psf_size: size of psf
:return: re-sized and re-normalized PSF</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.pixel_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">pixel_kernel</code><span class="sig-paren">(</span><em>point_source_kernel</em>, <em>subgrid_res=7</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#pixel_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.pixel_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>converts a pixelised kernel of a point source to a kernel representing a uniform extended pixel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>point_source_kernel</strong> – </li>
<li><strong>subgrid_res</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">convolution kernel for an extended pixel</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.kernel_average_pixel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">kernel_average_pixel</code><span class="sig-paren">(</span><em>kernel_super</em>, <em>supersampling_factor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#kernel_average_pixel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.kernel_average_pixel" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the effective convolution kernel assuming a uniform surface brightness on the scale of a pixel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel_super</strong> – supersampled PSF of a point source (odd number per axis</li>
<li><strong>supersampling_factor</strong> – supersampling factor (int)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.kernel_gaussian">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">kernel_gaussian</code><span class="sig-paren">(</span><em>kernel_numPix</em>, <em>deltaPix</em>, <em>fwhm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#kernel_gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.kernel_gaussian" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.split_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">split_kernel</code><span class="sig-paren">(</span><em>kernel_super</em>, <em>supersampling_kernel_size</em>, <em>supersampling_factor</em>, <em>normalized=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#split_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.split_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>pixel kernel and subsampling kernel such that the convolution of both applied on an image can be
performed, i.e. smaller subsampling PSF and hole in larger PSF</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel</strong> – PSF kernel of the size of the pixel</li>
<li><strong>kernel_super</strong> – super-sampled kernel</li>
<li><strong>supersampling_kernel_size</strong> – size of super-sampled PSF in units of degraded pixels</li>
<li><strong>normalized</strong> – boolean, if True returns a split kernel that is area normalized=1 representing a convolution kernel</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">degraded kernel with hole and super-sampled kernel</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.degrade_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">degrade_kernel</code><span class="sig-paren">(</span><em>kernel_super</em>, <em>degrading_factor</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#degrade_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.degrade_kernel" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>kernel_super</strong> – higher resolution kernel (odd number per axis)</li>
<li><strong>degrading_factor</strong> – degrading factor (effectively the super-sampling resolution of the kernel given</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">degraded kernel with odd axis number with the sum of the flux/values in the kernel being preserved</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.cutout_source">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">cutout_source</code><span class="sig-paren">(</span><em>x_pos</em>, <em>y_pos</em>, <em>image</em>, <em>kernelsize</em>, <em>shift=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#cutout_source"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.cutout_source" title="Permalink to this definition">¶</a></dt>
<dd><p>cuts out point source (e.g. PSF estimate) out of image and shift it to the center of a pixel
:param x_pos:
:param y_pos:
:param image:
:param kernelsize:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.fwhm_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">fwhm_kernel</code><span class="sig-paren">(</span><em>kernel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#fwhm_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.fwhm_kernel" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kernel</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.estimate_amp">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">estimate_amp</code><span class="sig-paren">(</span><em>data</em>, <em>x_pos</em>, <em>y_pos</em>, <em>psf_kernel</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#estimate_amp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.estimate_amp" title="Permalink to this definition">¶</a></dt>
<dd><p>estimates the amplitude of a point source located at x_pos, y_pos
:param data:
:param x_pos:
:param y_pos:
:param deltaPix:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.kernel_util.mge_kernel">
<code class="descclassname">lenstronomy.Util.kernel_util.</code><code class="descname">mge_kernel</code><span class="sig-paren">(</span><em>kernel</em>, <em>order=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/kernel_util.html#mge_kernel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.kernel_util.mge_kernel" title="Permalink to this definition">¶</a></dt>
<dd><p>azimutal Multi-Gaussian expansion of a pixelized kernel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kernel</strong> – 2d numpy array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.mask_util">
<span id="lenstronomy-util-mask-util-module"></span><h2>lenstronomy.Util.mask_util module<a class="headerlink" href="#module-lenstronomy.Util.mask_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.mask_util.mask_center_2d">
<code class="descclassname">lenstronomy.Util.mask_util.</code><code class="descname">mask_center_2d</code><span class="sig-paren">(</span><em>center_x</em>, <em>center_y</em>, <em>r</em>, <em>x_grid</em>, <em>y_grid</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/mask_util.html#mask_center_2d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.mask_util.mask_center_2d" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>center_x</strong> – x-coordinate of center position of circular mask</li>
<li><strong>center_y</strong> – y-coordinate of center position of circular mask</li>
<li><strong>r</strong> – radius of mask in pixel values</li>
<li><strong>x_grid</strong> – x-coordinate grid</li>
<li><strong>y_grid</strong> – y-coordinate grid</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">mask array of shape x_grid with =0 inside the radius and =1 outside</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.mask_util.mask_azimuthal">
<code class="descclassname">lenstronomy.Util.mask_util.</code><code class="descname">mask_azimuthal</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>center_x</em>, <em>center_y</em>, <em>r</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/mask_util.html#mask_azimuthal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.mask_util.mask_azimuthal" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – x-coordinates (1d or 2d array numpy array)</li>
<li><strong>y</strong> – y-coordinates (1d or 2d array numpy array)</li>
<li><strong>center_x</strong> – center of azimuthal mask in x</li>
<li><strong>center_y</strong> – center of azimuthal mask in y</li>
<li><strong>r</strong> – radius of azimuthal mask</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">array with zeros outside r and ones inside azimuthal radius r</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.mask_util.mask_ellipse">
<code class="descclassname">lenstronomy.Util.mask_util.</code><code class="descname">mask_ellipse</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>center_x</em>, <em>center_y</em>, <em>a</em>, <em>b</em>, <em>angle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/mask_util.html#mask_ellipse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.mask_util.mask_ellipse" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – x-coordinates of pixels</li>
<li><strong>y</strong> – y-coordinates of pixels</li>
<li><strong>center_x</strong> – center of mask</li>
<li><strong>center_y</strong> – center of mask</li>
<li><strong>a</strong> – major axis</li>
<li><strong>b</strong> – minor axis</li>
<li><strong>angle</strong> – angle of major axis</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">mask (list of zeros and ones)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.mask_util.mask_half_moon">
<code class="descclassname">lenstronomy.Util.mask_util.</code><code class="descname">mask_half_moon</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>center_x</em>, <em>center_y</em>, <em>r_in</em>, <em>r_out</em>, <em>phi0=0</em>, <em>delta_phi=6.283185307179586</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/mask_util.html#mask_half_moon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.mask_util.mask_half_moon" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – </li>
<li><strong>y</strong> – </li>
<li><strong>center_x</strong> – </li>
<li><strong>center_y</strong> – </li>
<li><strong>r_in</strong> – </li>
<li><strong>r_out</strong> – </li>
<li><strong>phi</strong> – </li>
<li><strong>delta_phi</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.multi_gauss_expansion">
<span id="lenstronomy-util-multi-gauss-expansion-module"></span><h2>lenstronomy.Util.multi_gauss_expansion module<a class="headerlink" href="#module-lenstronomy.Util.multi_gauss_expansion" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.multi_gauss_expansion.gaussian">
<code class="descclassname">lenstronomy.Util.multi_gauss_expansion.</code><code class="descname">gaussian</code><span class="sig-paren">(</span><em>R</em>, <em>sigma</em>, <em>amp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/multi_gauss_expansion.html#gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.multi_gauss_expansion.gaussian" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>R</strong> – radius</li>
<li><strong>sigma</strong> – gaussian sigma</li>
<li><strong>amp</strong> – normalization</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Gaussian function</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.multi_gauss_expansion.mge_1d">
<code class="descclassname">lenstronomy.Util.multi_gauss_expansion.</code><code class="descname">mge_1d</code><span class="sig-paren">(</span><em>r_array</em>, <em>flux_r</em>, <em>N=20</em>, <em>linspace=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/multi_gauss_expansion.html#mge_1d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.multi_gauss_expansion.mge_1d" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>r_array</strong> – list or radii (numpy array)</li>
<li><strong>flux_r</strong> – list of flux values (numpy array)</li>
<li><strong>N</strong> – number of Gaussians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">amplitudes and Gaussian sigmas for the best 1d flux profile</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.multi_gauss_expansion.de_projection_3d">
<code class="descclassname">lenstronomy.Util.multi_gauss_expansion.</code><code class="descname">de_projection_3d</code><span class="sig-paren">(</span><em>amplitudes</em>, <em>sigmas</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/multi_gauss_expansion.html#de_projection_3d"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.multi_gauss_expansion.de_projection_3d" title="Permalink to this definition">¶</a></dt>
<dd><p>de-projects a gaussian (or list of multiple Gaussians from a 2d projected to a 3d profile)
:param amplitudes:
:param sigmas:
:return:</p>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.numba_util">
<span id="lenstronomy-util-numba-util-module"></span><h2>lenstronomy.Util.numba_util module<a class="headerlink" href="#module-lenstronomy.Util.numba_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.numba_util.jit">
<code class="descclassname">lenstronomy.Util.numba_util.</code><code class="descname">jit</code><span class="sig-paren">(</span><em>nopython=True</em>, <em>cache=True</em>, <em>parallel=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/numba_util.html#jit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.numba_util.jit" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.param_util">
<span id="lenstronomy-util-param-util-module"></span><h2>lenstronomy.Util.param_util module<a class="headerlink" href="#module-lenstronomy.Util.param_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.param_util.cart2polar">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">cart2polar</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>center_x=0</em>, <em>center_y=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#cart2polar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.cart2polar" title="Permalink to this definition">¶</a></dt>
<dd><p>transforms cartesian coords [x,y] into polar coords [r,phi] in the frame of the lense center</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<em>array of size</em><em> (</em><em>n</em><em>)</em>) – set of x-coordinates</li>
<li><strong>y</strong> (<em>array of size</em><em> (</em><em>n</em><em>)</em>) – set of x-coordinates</li>
<li><strong>center_x</strong> (<em>float</em>) – rotation point</li>
<li><strong>center_y</strong> (<em>float</em>) – rotation point</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">array of same size with coords [r,phi]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.polar2cart">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">polar2cart</code><span class="sig-paren">(</span><em>r</em>, <em>phi</em>, <em>center</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#polar2cart"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.polar2cart" title="Permalink to this definition">¶</a></dt>
<dd><p>transforms polar coords [r,phi] into cartesian coords [x,y] in the frame of the lense center</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>coord</strong> (<em>array of size</em><em> (</em><em>n</em><em>,</em><em>2</em><em>)</em>) – set of coordinates</li>
<li><strong>center</strong> (<em>array of size</em><em> (</em><em>2</em><em>)</em>) – rotation point</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">array of same size with coords [x,y]</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">AttributeError, KeyError</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.shear_polar2cartesian">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">shear_polar2cartesian</code><span class="sig-paren">(</span><em>phi</em>, <em>gamma</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#shear_polar2cartesian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.shear_polar2cartesian" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>phi</strong> – shear angle (radian)</li>
<li><strong>gamma</strong> – shear strength</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">shear components gamma1, gamma2</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.shear_cartesian2polar">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">shear_cartesian2polar</code><span class="sig-paren">(</span><em>gamma1</em>, <em>gamma2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#shear_cartesian2polar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.shear_cartesian2polar" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>gamma1</strong> – cartesian shear component</li>
<li><strong>gamma2</strong> – cartesian shear component</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">shear angle, shear strength</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.phi_q2_ellipticity">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">phi_q2_ellipticity</code><span class="sig-paren">(</span><em>phi</em>, <em>q</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#phi_q2_ellipticity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.phi_q2_ellipticity" title="Permalink to this definition">¶</a></dt>
<dd><p>transforms orientation angle and axis ratio into complex ellipticity moduli e1, e2</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>phi</strong> – angle of orientation (in radian)</li>
<li><strong>q</strong> – axis ratio minor axis / major axis</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">eccentricities e1 and e2 in complex ellipticity moduli</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.ellipticity2phi_q">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">ellipticity2phi_q</code><span class="sig-paren">(</span><em>e1</em>, <em>e2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#ellipticity2phi_q"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.ellipticity2phi_q" title="Permalink to this definition">¶</a></dt>
<dd><p>transforms complex ellipticity moduli in orientation angle and axis ratio</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>e1</strong> – eccentricity in x-direction</li>
<li><strong>e2</strong> – eccentricity in xy-direction</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">angle in radian, axis ratio (minor/major)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.transform_e1e2_product_average">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">transform_e1e2_product_average</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>e1</em>, <em>e2</em>, <em>center_x</em>, <em>center_y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#transform_e1e2_product_average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.transform_e1e2_product_average" title="Permalink to this definition">¶</a></dt>
<dd><p>maps the coordinates x, y with eccentricities e1 e2 into a new elliptical coordinate system
such that R = sqrt(R_major * R_minor)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – x-coordinate</li>
<li><strong>y</strong> – y-coordinate</li>
<li><strong>e1</strong> – eccentricity</li>
<li><strong>e2</strong> – eccentricity</li>
<li><strong>center_x</strong> – center of distortion</li>
<li><strong>center_y</strong> – center of distortion</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">distorted coordinates x’, y’</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.param_util.transform_e1e2_square_average">
<code class="descclassname">lenstronomy.Util.param_util.</code><code class="descname">transform_e1e2_square_average</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>e1</em>, <em>e2</em>, <em>center_x</em>, <em>center_y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/param_util.html#transform_e1e2_square_average"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.param_util.transform_e1e2_square_average" title="Permalink to this definition">¶</a></dt>
<dd><p>maps the coordinates x, y with eccentricities e1 e2 into a new elliptical coordinate system
such that R = sqrt(R_major**2 + R_minor**2)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – x-coordinate</li>
<li><strong>y</strong> – y-coordinate</li>
<li><strong>e1</strong> – eccentricity</li>
<li><strong>e2</strong> – eccentricity</li>
<li><strong>center_x</strong> – center of distortion</li>
<li><strong>center_y</strong> – center of distortion</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">distorted coordinates x’, y’</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.prob_density">
<span id="lenstronomy-util-prob-density-module"></span><h2>lenstronomy.Util.prob_density module<a class="headerlink" href="#module-lenstronomy.Util.prob_density" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="lenstronomy.Util.prob_density.SkewGaussian">
<em class="property">class </em><code class="descclassname">lenstronomy.Util.prob_density.</code><code class="descname">SkewGaussian</code><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#SkewGaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.SkewGaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class for the Skew Gaussian distribution</p>
<dl class="method">
<dt id="lenstronomy.Util.prob_density.SkewGaussian.map_mu_sigma_skw">
<code class="descname">map_mu_sigma_skw</code><span class="sig-paren">(</span><em>mu</em>, <em>sigma</em>, <em>skw</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#SkewGaussian.map_mu_sigma_skw"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.SkewGaussian.map_mu_sigma_skw" title="Permalink to this definition">¶</a></dt>
<dd><p>map to parameters e, w, a
:param mu: mean
:param sigma: standard deviation
:param skw: skewness
:return: e, w, a</p>
</dd></dl>

<dl class="method">
<dt id="lenstronomy.Util.prob_density.SkewGaussian.pdf">
<code class="descname">pdf</code><span class="sig-paren">(</span><em>x</em>, <em>e=0.0</em>, <em>w=1.0</em>, <em>a=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#SkewGaussian.pdf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.SkewGaussian.pdf" title="Permalink to this definition">¶</a></dt>
<dd><p>probability density function
see: <a class="reference external" href="https://en.wikipedia.org/wiki/Skew_normal_distribution">https://en.wikipedia.org/wiki/Skew_normal_distribution</a>
:param x: input value
:param e:
:param w:
:param a:
:return:</p>
</dd></dl>

<dl class="method">
<dt id="lenstronomy.Util.prob_density.SkewGaussian.pdf_skew">
<code class="descname">pdf_skew</code><span class="sig-paren">(</span><em>x</em>, <em>mu</em>, <em>sigma</em>, <em>skw</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#SkewGaussian.pdf_skew"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.SkewGaussian.pdf_skew" title="Permalink to this definition">¶</a></dt>
<dd><p>function with different parameterisation
:param x:
:param mu: mean
:param sigma: sigma
:param skw: skewness
:return:</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="lenstronomy.Util.prob_density.KDE1D">
<em class="property">class </em><code class="descclassname">lenstronomy.Util.prob_density.</code><code class="descname">KDE1D</code><span class="sig-paren">(</span><em>values</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#KDE1D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.KDE1D" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class that allows to compute likelihoods based on a 1-d posterior sample</p>
<dl class="method">
<dt id="lenstronomy.Util.prob_density.KDE1D.likelihood">
<code class="descname">likelihood</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#KDE1D.likelihood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.KDE1D.likelihood" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>x</strong> – position where to evaluate the density</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">likelihood given the sample distribution</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.prob_density.compute_lower_upper_errors">
<code class="descclassname">lenstronomy.Util.prob_density.</code><code class="descname">compute_lower_upper_errors</code><span class="sig-paren">(</span><em>sample</em>, <em>num_sigma=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/prob_density.html#compute_lower_upper_errors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.prob_density.compute_lower_upper_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the upper and lower sigma from the median value.
This functions gives good error estimates for skewed pdf’s
:param sample: 1-D sample
:param num_sigma: integer, number of sigmas to be returned
:return: median, lower_sigma, upper_sigma</p>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.sampling_util">
<span id="lenstronomy-util-sampling-util-module"></span><h2>lenstronomy.Util.sampling_util module<a class="headerlink" href="#module-lenstronomy.Util.sampling_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.sampling_util.unit2gaussian">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">unit2gaussian</code><span class="sig-paren">(</span><em>x</em>, <em>mu</em>, <em>sigma</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#unit2gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.unit2gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from uniform distribution on unit hypercube
to truncated gaussian distribution on parameter space, 
with mean ‘mu’ and std dev ‘sigma’</p>
<p>from Handley+15, eq. (A9)</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.sampling_util.unit2uniform">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">unit2uniform</code><span class="sig-paren">(</span><em>x</em>, <em>vmin</em>, <em>vmax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#unit2uniform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.unit2uniform" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from uniform distribution on parameter space 
to uniform distribution on unit hypercube</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.sampling_util.uniform2unit">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">uniform2unit</code><span class="sig-paren">(</span><em>theta</em>, <em>vmin</em>, <em>vmax</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#uniform2unit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.uniform2unit" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from uniform distribution on unit hypercube
to uniform distribution on parameter space</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.sampling_util.cube2args_uniform">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">cube2args_uniform</code><span class="sig-paren">(</span><em>cube</em>, <em>lowers</em>, <em>uppers</em>, <em>num_dims</em>, <em>copy=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#cube2args_uniform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.cube2args_uniform" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from uniform distribution on unit hypercube ‘cube’
to uniform distribution on parameter space</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cube</strong> – list or 1D-array of parameter values on unit hypercube</li>
<li><strong>lowers</strong> – lower bounds for each parameter</li>
<li><strong>uppers</strong> – upper bounds for each parameter</li>
<li><strong>num_dims</strong> – parameter space dimension (= number of parameters)</li>
<li><strong>copy</strong> – If False, this function modifies ‘cube’ in-place. Default to False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">hypercube mapped to parameters space</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.sampling_util.cube2args_gaussian">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">cube2args_gaussian</code><span class="sig-paren">(</span><em>cube</em>, <em>lowers</em>, <em>uppers</em>, <em>means</em>, <em>sigmas</em>, <em>num_dims</em>, <em>copy=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#cube2args_gaussian"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.cube2args_gaussian" title="Permalink to this definition">¶</a></dt>
<dd><p>mapping from uniform distribution on unit hypercube ‘cube’
to truncated gaussian distribution on parameter space, 
with mean ‘mu’ and std dev ‘sigma’</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cube</strong> – list or 1D-array of parameter values on unit hypercube</li>
<li><strong>lowers</strong> – lower bounds for each parameter</li>
<li><strong>uppers</strong> – upper bounds for each parameter</li>
<li><strong>means</strong> – gaussian mean for each parameter</li>
<li><strong>sigmas</strong> – gaussian std deviation for each parameter</li>
<li><strong>num_dims</strong> – parameter space dimension (= number of parameters)</li>
<li><strong>copy</strong> – If False, this function modifies ‘cube’ in-place. Default to False.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">hypercube mapped to parameters space</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.sampling_util.scale_limits">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">scale_limits</code><span class="sig-paren">(</span><em>lowers</em>, <em>uppers</em>, <em>scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#scale_limits"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.scale_limits" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.sampling_util.sample_ball">
<code class="descclassname">lenstronomy.Util.sampling_util.</code><code class="descname">sample_ball</code><span class="sig-paren">(</span><em>p0</em>, <em>std</em>, <em>size=1</em>, <em>dist='uniform'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/sampling_util.html#sample_ball"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.sampling_util.sample_ball" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a ball of walkers around an initial parameter value.
this routine is from the emcee package as it became deprecated there</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>p0</strong> – The initial parameter values (array).</li>
<li><strong>std</strong> – The axis-aligned standard deviation (array).</li>
<li><strong>size</strong> – The number of samples to produce.</li>
<li><strong>dist</strong> – string, specifies the distribution being sampled, supports ‘uniform’ and ‘normal’</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.simulation_util">
<span id="lenstronomy-util-simulation-util-module"></span><h2>lenstronomy.Util.simulation_util module<a class="headerlink" href="#module-lenstronomy.Util.simulation_util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.simulation_util.data_configure_simple">
<code class="descclassname">lenstronomy.Util.simulation_util.</code><code class="descname">data_configure_simple</code><span class="sig-paren">(</span><em>numPix</em>, <em>deltaPix</em>, <em>exposure_time=None</em>, <em>background_rms=None</em>, <em>center_ra=0</em>, <em>center_dec=0</em>, <em>inverse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/simulation_util.html#data_configure_simple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.simulation_util.data_configure_simple" title="Permalink to this definition">¶</a></dt>
<dd><p>configures the data keyword arguments with a coordinate grid centered at zero.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>numPix</strong> – number of pixel (numPix x numPix)</li>
<li><strong>deltaPix</strong> – pixel size (in angular units)</li>
<li><strong>exposure_time</strong> – exposure time</li>
<li><strong>background_rms</strong> – background noise (Gaussian sigma)</li>
<li><strong>center_ra</strong> – RA at the center of the image</li>
<li><strong>center_dec</strong> – DEC at the center of the image</li>
<li><strong>inverse</strong> – if True, coordinate system is ra to the left, if False, to the right</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">keyword arguments that can be used to construct a Data() class instance of lenstronomy</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.simulation_util.simulate_simple">
<code class="descclassname">lenstronomy.Util.simulation_util.</code><code class="descname">simulate_simple</code><span class="sig-paren">(</span><em>image_model_class</em>, <em>kwargs_lens=None</em>, <em>kwargs_source=None</em>, <em>kwargs_lens_light=None</em>, <em>kwargs_ps=None</em>, <em>no_noise=False</em>, <em>source_add=True</em>, <em>lens_light_add=True</em>, <em>point_source_add=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/simulation_util.html#simulate_simple"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.simulation_util.simulate_simple" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>image_model_class</strong> – </li>
<li><strong>kwargs_lens</strong> – </li>
<li><strong>kwargs_source</strong> – </li>
<li><strong>kwargs_lens_light</strong> – </li>
<li><strong>kwargs_ps</strong> – </li>
<li><strong>no_noise</strong> – </li>
<li><strong>source_add</strong> – </li>
<li><strong>lens_light_add</strong> – </li>
<li><strong>point_source_add</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util.util">
<span id="lenstronomy-util-util-module"></span><h2>lenstronomy.Util.util module<a class="headerlink" href="#module-lenstronomy.Util.util" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="lenstronomy.Util.util.merge_dicts">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">merge_dicts</code><span class="sig-paren">(</span><em>*dict_args</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#merge_dicts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.merge_dicts" title="Permalink to this definition">¶</a></dt>
<dd><p>Given any number of dicts, shallow copy and merge into a new dict,
precedence goes to key value pairs in latter dicts.</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.approx_theta_E">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">approx_theta_E</code><span class="sig-paren">(</span><em>ximg</em>, <em>yimg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#approx_theta_E"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.approx_theta_E" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.sort_image_index">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">sort_image_index</code><span class="sig-paren">(</span><em>ximg</em>, <em>yimg</em>, <em>xref</em>, <em>yref</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#sort_image_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.sort_image_index" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ximg</strong> – x coordinates to sort</li>
<li><strong>yimg</strong> – y coordinates to sort</li>
<li><strong>xref</strong> – reference x coordinate</li>
<li><strong>yref</strong> – reference y coordinate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">indexes such that ximg[indexes],yimg[indexes] matches xref,yref</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.rotate">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">rotate</code><span class="sig-paren">(</span><em>xcoords</em>, <em>ycoords</em>, <em>angle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#rotate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.rotate" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcoords</strong> – x points</li>
<li><strong>ycoords</strong> – y points</li>
<li><strong>angle</strong> – angle in radians</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">x points and y points rotated ccw by angle theta</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.map_coord2pix">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">map_coord2pix</code><span class="sig-paren">(</span><em>ra</em>, <em>dec</em>, <em>x_0</em>, <em>y_0</em>, <em>M</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#map_coord2pix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.map_coord2pix" title="Permalink to this definition">¶</a></dt>
<dd><p>this routines performs a linear transformation between two coordinate systems. Mainly used to transform angular
into pixel coordinates in an image
:param ra: ra coordinates
:param dec: dec coordinates
:param x_0: pixel value in x-axis of ra,dec = 0,0
:param y_0: pixel value in y-axis of ra,dec = 0,0
:param M: 2x2 matrix to transform angular to pixel coordinates
:return: transformed coordinate systems of input ra and dec</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.array2image">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">array2image</code><span class="sig-paren">(</span><em>array</em>, <em>nx=0</em>, <em>ny=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#array2image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.array2image" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the information contained in a 1d array into an n*n 2d array
(only works when length of array is n**2, or nx and ny are provided)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array</strong> (<em>array of size n**2</em>) – image values</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">2d array</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">AttributeError, KeyError</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.image2array">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">image2array</code><span class="sig-paren">(</span><em>image</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#image2array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.image2array" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the information contained in a 2d array into an n*n 1d array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array</strong> (<em>array of size</em><em> (</em><em>n</em><em>,</em><em>n</em><em>)</em>) – image values</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">1d array</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">AttributeError, KeyError</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.array2cube">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">array2cube</code><span class="sig-paren">(</span><em>array</em>, <em>n_1</em>, <em>n_23</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#array2cube"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.array2cube" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the information contained in a 1d array of shape (n_1*n_23*n_23) into 3d array with shape (n_1, sqrt(n_23), sqrt(n_23))</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array</strong> (<em>1d array</em>) – image values</li>
<li><strong>n_1</strong> – first dimension of returned array</li>
<li><strong>n_23</strong> – square of second and third dimensions of returned array</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">3d array</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><strong>ValueError</strong> – when n_23 is not a perfect square</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.cube2array">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">cube2array</code><span class="sig-paren">(</span><em>cube</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#cube2array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.cube2array" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the information contained in a 3d array of shape (n_1, n_2, n_3) into 1d array with shape (n_1*n_2*n_3)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>array</strong> (<em>3d array</em>) – image values</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">1d array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.make_grid">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">make_grid</code><span class="sig-paren">(</span><em>numPix</em>, <em>deltapix</em>, <em>subgrid_res=1</em>, <em>left_lower=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#make_grid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.make_grid" title="Permalink to this definition">¶</a></dt>
<dd><p>creates pixel grid (in 1d arrays of x- and y- positions)
default coordinate frame is such that (0,0) is in the center of the coordinate grid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>numPix</strong> – number of pixels per axis
Give an integers for a square grid, or a 2-length sequence
(first, second axis length) for a non-square grid.</li>
<li><strong>deltapix</strong> – pixel size</li>
<li><strong>subgrid_res</strong> – sub-pixel resolution (default=1)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">x, y position information in two 1d arrays</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.make_grid_transformed">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">make_grid_transformed</code><span class="sig-paren">(</span><em>numPix</em>, <em>Mpix2Angle</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#make_grid_transformed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.make_grid_transformed" title="Permalink to this definition">¶</a></dt>
<dd><p>returns grid with linear transformation (deltaPix and rotation)
:param numPix: number of Pixels
:param Mpix2Angle: 2-by-2 matrix to mat a pixel to a coordinate
:return: coordinate grid</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.make_grid_with_coordtransform">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">make_grid_with_coordtransform</code><span class="sig-paren">(</span><em>numPix</em>, <em>deltapix</em>, <em>subgrid_res=1</em>, <em>center_ra=0</em>, <em>center_dec=0</em>, <em>left_lower=False</em>, <em>inverse=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#make_grid_with_coordtransform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.make_grid_with_coordtransform" title="Permalink to this definition">¶</a></dt>
<dd><p>same as make_grid routine, but returns the transformation matrix and shift between coordinates and pixel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>numPix</strong> – number of pixels per axis</li>
<li><strong>deltapix</strong> – pixel scale per axis</li>
<li><strong>subgrid_res</strong> – supersampling resolution relative to the stated pixel size</li>
<li><strong>center_ra</strong> – center of the grid</li>
<li><strong>center_dec</strong> – center of the grid</li>
<li><strong>left_lower</strong> – sets the zero point at the lower left corner of the pixels</li>
<li><strong>inverse</strong> – bool, if true sets East as left, otherwise East is righrt</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.grid_from_coordinate_transform">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">grid_from_coordinate_transform</code><span class="sig-paren">(</span><em>nx</em>, <em>ny</em>, <em>Mpix2coord</em>, <em>ra_at_xy_0</em>, <em>dec_at_xy_0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#grid_from_coordinate_transform"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.grid_from_coordinate_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>return a grid in x and y coordinates that satisfy the coordinate system</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>nx</strong> – number of pixels in x-axis</li>
<li><strong>ny</strong> – number of pixels in y-axis</li>
<li><strong>Mpix2coord</strong> – transformation matrix (2x2) of pixels into coordinate displacements</li>
<li><strong>ra_at_xy_0</strong> – RA coordinate at (x,y) = (0,0)</li>
<li><strong>dec_at_xy_0</strong> – DEC coordinate at (x,y) = (0,0)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">RA coordinate grid, DEC coordinate grid</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.get_axes">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">get_axes</code><span class="sig-paren">(</span><em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#get_axes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.get_axes" title="Permalink to this definition">¶</a></dt>
<dd><p>computes the axis x and y of a given 2d grid
:param x:
:param y:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.averaging">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">averaging</code><span class="sig-paren">(</span><em>grid</em>, <em>numGrid</em>, <em>numPix</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#averaging"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.averaging" title="Permalink to this definition">¶</a></dt>
<dd><p>resize 2d pixel grid with numGrid to numPix and averages over the pixels
:param grid: higher resolution pixel grid
:param numGrid: number of pixels per axis in the high resolution input image
:param numPix: lower number of pixels per axis in the output image (numGrid/numPix is integer number)
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.displaceAbs">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">displaceAbs</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>sourcePos_x</em>, <em>sourcePos_y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#displaceAbs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.displaceAbs" title="Permalink to this definition">¶</a></dt>
<dd><p>calculates a grid of distances to the observer in angel</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mapped_cartcoord</strong> (<em>numpy array</em><em> (</em><em>n</em><em>,</em><em>2</em><em>)</em>) – mapped cartesian coordinates</li>
<li><strong>sourcePos</strong> (<em>numpy vector</em><em> [</em><em>x0</em><em>,</em><em>y0</em><em>]</em>) – source position</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">array of displacement</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last">AttributeError, KeyError</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.get_distance">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">get_distance</code><span class="sig-paren">(</span><em>x_mins</em>, <em>y_mins</em>, <em>x_true</em>, <em>y_true</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#get_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.get_distance" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_mins</strong> – </li>
<li><strong>y_mins</strong> – </li>
<li><strong>x_true</strong> – </li>
<li><strong>y_true</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.compare_distance">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">compare_distance</code><span class="sig-paren">(</span><em>x_mapped</em>, <em>y_mapped</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#compare_distance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.compare_distance" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x_mapped</strong> – array of x-positions of remapped catalogue image</li>
<li><strong>y_mapped</strong> – array of y-positions of remapped catalogue image</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">sum of distance square of positions</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.min_square_dist">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">min_square_dist</code><span class="sig-paren">(</span><em>x_1</em>, <em>y_1</em>, <em>x_2</em>, <em>y_2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#min_square_dist"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.min_square_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>return minimum of quadratic distance of pairs (x1, y1) to pairs (x2, y2)
:param x_1:
:param y_1:
:param x_2:
:param y_2:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.selectBest">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">selectBest</code><span class="sig-paren">(</span><em>array</em>, <em>criteria</em>, <em>numSelect</em>, <em>highest=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#selectBest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.selectBest" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array</strong> – numpy array to be selected from</li>
<li><strong>criteria</strong> – criteria of selection</li>
<li><strong>highest</strong> – bool, if false the lowest will be selected</li>
<li><strong>numSelect</strong> – number of elements to be selected</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.select_best">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">select_best</code><span class="sig-paren">(</span><em>array</em>, <em>criteria</em>, <em>num_select</em>, <em>highest=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#select_best"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.select_best" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>array</strong> – numpy array to be selected from</li>
<li><strong>criteria</strong> – criteria of selection</li>
<li><strong>highest</strong> – bool, if false the lowest will be selected</li>
<li><strong>num_select</strong> – number of elements to be selected</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.points_on_circle">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">points_on_circle</code><span class="sig-paren">(</span><em>radius</em>, <em>num_points</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#points_on_circle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.points_on_circle" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a set of uniform points around a circle
:param radius: radius of the circle
:param num_points: number of points on the circle
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.neighborSelect">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">neighborSelect</code><span class="sig-paren">(</span><em>a</em>, <em>x</em>, <em>y</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#neighborSelect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.neighborSelect" title="Permalink to this definition">¶</a></dt>
<dd><p>#TODO replace by from scipy.signal import argrelextrema for speed up
&gt;&gt;&gt; from scipy.signal import argrelextrema
&gt;&gt;&gt; x = np.array([2, 1, 2, 3, 2, 0, 1, 0])
&gt;&gt;&gt; argrelextrema(x, np.greater)
(array([3, 6]),)
&gt;&gt;&gt; y = np.array([[1, 2, 1, 2],
…               [2, 2, 0, 0],
…               [5, 3, 4, 4]])
…
&gt;&gt;&gt; argrelextrema(y, np.less, axis=1)
(array([0, 2]), array([2, 1]))</p>
<p>finds (local) minima in a 2d grid</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>a</strong> (<em>numpy array with length numPix**2 in float</em>) – 1d array of displacements from the source positions</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">array of indices of local minima, values of those minima</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body">AttributeError, KeyError</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.fwhm2sigma">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">fwhm2sigma</code><span class="sig-paren">(</span><em>fwhm</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#fwhm2sigma"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.fwhm2sigma" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fwhm</strong> – full-widt-half-max value</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">gaussian sigma (sqrt(var))</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.sigma2fwhm">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">sigma2fwhm</code><span class="sig-paren">(</span><em>sigma</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#sigma2fwhm"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.sigma2fwhm" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>sigma</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.hyper2F2_array">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">hyper2F2_array</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>c</em>, <em>d</em>, <em>x</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#hyper2F2_array"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.hyper2F2_array" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> – </li>
<li><strong>b</strong> – </li>
<li><strong>c</strong> – </li>
<li><strong>d</strong> – </li>
<li><strong>x</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.make_subgrid">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">make_subgrid</code><span class="sig-paren">(</span><em>ra_coord</em>, <em>dec_coord</em>, <em>subgrid_res=2</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#make_subgrid"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.make_subgrid" title="Permalink to this definition">¶</a></dt>
<dd><p>return a grid with subgrid resolution
:param ra_coord:
:param dec_coord:
:param subgrid_res:
:return:</p>
</dd></dl>

<dl class="function">
<dt id="lenstronomy.Util.util.convert_bool_list">
<code class="descclassname">lenstronomy.Util.util.</code><code class="descname">convert_bool_list</code><span class="sig-paren">(</span><em>n</em>, <em>k=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/lenstronomy/Util/util.html#convert_bool_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#lenstronomy.Util.util.convert_bool_list" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a bool list of the length of the lens models
if k = None: returns bool list with True’s
if k is int, returns bool list with False’s but k’th is True
if k is a list of int, e.g. [0, 3, 5], returns a bool list with True’s in the integers listed and False elsewhere
if k is a boolean list, checks for size to match the numbers of models and returns it</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>n</strong> – integer, total lenght of output boolean list</li>
<li><strong>k</strong> – None, int, or list of ints</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">bool list</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-lenstronomy.Util">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-lenstronomy.Util" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">lenstronomy.Util package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.analysis_util">lenstronomy.Util.analysis_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.class_creator">lenstronomy.Util.class_creator module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.constants">lenstronomy.Util.constants module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.correlation">lenstronomy.Util.correlation module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.data_util">lenstronomy.Util.data_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.derivative_util">lenstronomy.Util.derivative_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.image_util">lenstronomy.Util.image_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.kernel_util">lenstronomy.Util.kernel_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.mask_util">lenstronomy.Util.mask_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.multi_gauss_expansion">lenstronomy.Util.multi_gauss_expansion module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.numba_util">lenstronomy.Util.numba_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.param_util">lenstronomy.Util.param_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.prob_density">lenstronomy.Util.prob_density module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.sampling_util">lenstronomy.Util.sampling_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.simulation_util">lenstronomy.Util.simulation_util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util.util">lenstronomy.Util.util module</a></li>
<li><a class="reference internal" href="#module-lenstronomy.Util">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="lenstronomy.SimulationAPI.ObservationConfig.html"
                        title="previous chapter">lenstronomy.SimulationAPI.ObservationConfig package</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lenstronomy.Workflow.html"
                        title="next chapter">lenstronomy.Workflow package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/lenstronomy.Util.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="lenstronomy.Workflow.html" title="lenstronomy.Workflow package"
             >next</a> |</li>
        <li class="right" >
          <a href="lenstronomy.SimulationAPI.ObservationConfig.html" title="lenstronomy.SimulationAPI.ObservationConfig package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">lenstronomy 1.7.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="lenstronomy.html" >lenstronomy package</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Simon Birrer and contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.0.
    </div>
  </body>
</html>